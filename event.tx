/*
  Entity DSL grammar.
*/

EventModel:
    "Create" name=ID 
    components *= Component
;

Component:  
     Option | Action | Statment | NewOption
;

Statment: 
  condition=Condition entity=[Entity] 
  ('.' category=[Category])*
  '->' actionType=ActionType
;

Condition:
  "if" | "else" | "def"
;

Option:
  'add' entity=Entity 
  ('+' properties*=Property)*     
  "show" command=Command
  ("types" categories*=Category[',']".")*
;

NewOption:
  'addNew' entity=ID 
  ('+' properties*=Property)*     
  "show" command=Command
  ("types" categories*=Category[',']".")*
;

Command:
  CommandOption | SubCommandInOption
;

SubCommandInOption:
  "in" entity=[Entity]
;

Category: 
  name=ID ('='alias=ID)*
;

Entity:
  'Speaker'|'Organizer'|'User'|'Event'|'Payment'| 'Activity' | 'Assignment'|'Submission'|'Reviewer'|'Author' | 'CheckingCopy' | 'Receipt'
;

Property:
    name=ID ':' type=[Type] ('='alias=ID)*
;

// Type can be SimpleType or Entity
Type:
    SimpleType | Entity
;

SimpleType:
    'type' name=ID
;

CommandOption:
  commandsOption *= CommandType 
;

CommandType:
  'Insert' | 'Remove' | 'Update' | 'Search' | 'ListAll' | 'Search' | 'Management'
;

Action:
  'include' function=[FunctionType]
  params*=NewData + "."
;

FunctionType:
  'InterestConflict'
;

NewData:
  name=ID
;

ActionType:
  'sendEmailNotification' | 'assigmentConflictResolver' | 'askCardInfo' | 'reportsFrequencyperActivity' | 'reportsListofAuthors' | 'checkingCopyAtestado' | 'checkingCopyCertificado' | 'program' | 'importantDates' | 'reportsFrequencyperEvent'| 'generateCarne' | 'generateBoleto' | 'sendBugTrackEmail'
   | 'notificationsDeadline' | 'insertAttachment' | 'notificationsPaperAssignemnt' |'notificationsAceptanceRejection'
;

// Special rule for comments. Comments start with //
Comment:
    /\/\/.*$/
;
